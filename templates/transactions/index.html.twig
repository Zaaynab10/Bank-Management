<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Transactions{% endblock %}</title>
    <link rel="stylesheet" href="{{ asset('css/transaction.css') }}">
    <link rel="stylesheet" href="{{ asset('css/header.css') }}">
    <script src="{{ asset('js/pagination.js') }}" defer></script> 
</head>
<body>
    {% block body %}
        <header>
            <nav>
                <a href="/user">
                    <h1>VOTRE ESPACE PERSONNEL</h1>
                </a>
                <div>
                    <a href="{{ path('app_logout') }}">Se déconnecter</a>
                    <img src="{{ asset('images/profile-placeholder.png') }}" alt="Photo de profil">
                </div>
            </nav>
        </header>

        <div class="main-content">
            <!-- Section Gauche -->
            <div class="left-section">
                <h2>Solde du Compte :</h2>
                <p id="account-balance">{{ bankAccount.balance|number_format(2, ',', ' ') }} €</p>

                <div class="accounts">
                    <h3>Mes Comptes</h3>
                    <ul>
                        {% for account in bankAccounts %}
                            <li>
                                <strong>Compte {{ account.accountNumber }}</strong> - {{ account.type.value }}
                            </li>
                        {% else %}
                            <li>Aucun compte disponible.</li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="shortcuts">
                    <button onclick="window.location.href='{{ path('app_transfer') }}'">Faire un virement</button>
                    <button onclick="window.location.href='/transactions/{{ bankAccount.id }}/download'">Télécharger l'historique</button>
                </div>
            </div>

            <!-- Section Droite -->
            <div class="right-section">
                <h3>Transactions</h3>
                <ul id="transaction-list">
                    {% for transaction in transactions %}
                        <li class="transaction-item">
                            <div class="transaction-content">
                                <span class="date">{{ transaction.dateTime|date('d/m/Y H:i') }}</span> 
                                <span class="type">{{ transaction.type.value }}</span> 
                                <span class="amount {{ transaction.amount < 0 ? 'negative' : 'positive' }}">
                                    {{ transaction.amount|number_format(2, ',', ' ') }} €
                                </span> 
                                <span class="status">{{ transaction.status.value }}</span>
                            </div>
                        </li>
                    {% else %}
                        <li>Aucune transaction trouvée.</li>
                    {% endfor %}
                </ul>

                <!-- Pagination -->
                <div class="pagination">
                    <button class="page-btn" id="prev-page">Précédent</button>
                    <span id="page-info">Page 1</span>
                    <button class="page-btn" id="next-page">Suivant</button>
                </div>
            </div>
        </div>
    {% endblock %}
</body>
</html>